<div class="p-6 max-w-lg mx-auto">
  <h1 class="text-2xl font-bold mb-4">
    {{ product.id ? 'Editar Producto' : 'Nuevo Producto' }}
  </h1>

  <form (ngSubmit)="saveProduct()" class="space-y-4">
    <!-- Nombre -->
    <div>
      <label class="font-semibold">Nombre *</label>
      <input
        [(ngModel)]="product.nombre"
        name="nombre"
        required
        class="w-full p-2 border rounded"
      />
    </div>

    <!-- Descripción -->
    <div>
      <label class="font-semibold">Descripción</label>
      <textarea
        [(ngModel)]="product.descripcion"
        name="descripcion"
        rows="3"
        class="w-full p-2 border rounded"
      ></textarea>
    </div>

    <!-- Precio -->
    <div>
      <label class="font-semibold">Precio *</label>
      <input
        type="number"
        [(ngModel)]="product.precio"
        name="precio"
        required
        min="0.01"
        step="0.01"
        class="w-full p-2 border rounded"
      />
    </div>

    <!-- Stock -->
    <div>
      <label class="font-semibold">Stock</label>
      <input
        type="number"
        [(ngModel)]="product.stock"
        name="stock"
        min="0"
        class="w-full p-2 border rounded"
      />
    </div>

    <!-- Categoría -->
    <div>
      <label class="font-semibold">Categoría *</label>
      <select
        [(ngModel)]="product.categoriaId"
        name="categoriaId"
        required
        class="w-full p-2 border rounded"
      >
        <option value="">Selecciona una categoría</option>
        <option *ngFor="let cat of categories" [value]="cat.id">{{ cat.nombre }}</option>
      </select>
    </div>

    <!-- Sexo -->
    <div>
      <label class="font-semibold">Sexo *</label>
      <select
        [(ngModel)]="product.categoriaSexo"
        name="categoriaSexo"
        required
        class="w-full p-2 border rounded"
      >
        <option value="">Selecciona un sexo</option>
        <option *ngFor="let s of availableSexos" [value]="s">{{ s }}</option>
      </select>
    </div>

    <!-- Imagen (URL simple o futura carga base64) -->
    <div>
      <label class="font-semibold">URL de Imagen</label>
      <input
        type="url"
        [(ngModel)]="product.imagenesBase64"
        name="imagenesBase64"
        class="w-full p-2 border rounded"
        placeholder="https://ejemplo.com/imagen.jpg"
      />
      <small class="text-gray-500">Puedes ingresar una URL o dejarlo vacío.</small>
    </div>

    <!-- Tallas -->
    <div>
      <label class="font-semibold">Tallas Disponibles *</label>
      <div class="flex gap-2 flex-wrap mt-1">
        <button
          type="button"
          *ngFor="let size of availableSizes"
          (click)="toggleSize(size)"
          [class.bg-blue-600]="selectedSizes.includes(size)"
          [class.text-white]="selectedSizes.includes(size)"
          class="px-2 py-1 border rounded"
        >
          {{ size }}
        </button>
      </div>
    </div>

    <!-- Colores -->
    <div>
      <label class="font-semibold">Colores Disponibles</label>
      <div class="flex gap-2 flex-wrap mt-1">
        <button
          type="button"
          *ngFor="let color of availableColors"
          (click)="toggleColor(color.value)"
          [style.backgroundColor]="color.value"
          [class.border-4]="selectedColors.includes(color.value)"
          class="w-8 h-8 rounded-full border"
          [title]="color.name"
        ></button>
      </div>
    </div>

    <!-- Botones -->
    <div class="flex gap-2 mt-6 justify-end">
      <button
        type="submit"
        class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"
      >
        Guardar
      </button>
      <button
        type="button"
        (click)="router.navigate(['/dashboard/products'])"
        class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400"
      >
        Cancelar
      </button>
    </div>
  </form>
</div>
